{% from "includes/macros.jinja2" import Link, mergeClasses with context %}

{% macro navBar(toggleId='navbarSupportedContent', bg='bg-body-tertiary', show_brand=True, extraClass=None, toggler_content=None, toggle_class=None) -%}
<nav class="{{ mergeClasses('navbar', 'navbar-expand-lg', bg, extraClass) }}">
  <div class="container-fluid">
    {% if show_brand %}
    <a class="navbar-brand px-4 border-end border-end-primary-subtle" href="#">{{ app.site_name }}</a>
    {% endif %}
    <button
      class="navbar-toggler"
      type="button"
      data-coreui-toggle="collapse"
      data-coreui-target="#{{ toggleId }}"
      aria-controls="{{ toggleId }}"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      {% if toggler_content %}
        {{ toggler_content }}
      {% else %}
      <span class="navbar-toggler-icon"></span>
      {% endif %}
    </button>
    <div class="{{ mergeClasses('collapse', 'navbar-collapse', toggle_class) }}" id="{{ toggleId }}">
      {{ caller() }}
    </div>
  </div>
</nav>
{%- endmacro %}


{% macro headerNav() -%}
<header class="header">
  <a class="header-brand" href="#">
    Brand
  </a>
  <button class="header-toggler" type="button">
    <span class="header-toggler-icon"></span>
  </button>
  <ul class="header-nav mr-auto">
    {{ caller() }}
  </ul>
</header>
{%- endmacro %}


{% macro navItem(elemId=None, extraClass=None) -%}
  <li class="{{ mergeClasses('nav-item', extraClass) }}"{% if elemId is not none %} id="{{ elemId }}"{% endif %}>
    {{ caller() }}
  </li>
{%- endmacro %}


{% macro navLink(href, text) %}
  {% call navItem() -%}
  {{ Link(href, text, extraClass="nav-link") }}
  {%- endcall %}
{% endmacro %}

{% macro navDropdownButton(elemId, extraClass=None) -%}
<a
  class="{{ mergeClasses('nav-link dropdown-toggle', extraClass) }}"
  {% if elemId is not none %}id="{{ elemId }}"{% endif %}
  href="#"
  role="button"
  data-coreui-toggle="dropdown"
  aria-expanded="false"
>
  {{ caller() }}
</a>
{%- endmacro %}

{% macro navDropdown(title, elemId=None, extraClass=None) -%}
{% set outerCaller=caller %}
{% call navItem(extraClass=mergeClasses('dropdown', extraClass), elemId=elemId) %}
  {% call navDropdownButton() %}
    {{ title }}
  {% endcall %}
  <ul class="dropdown-menu">
    {{ outerCaller() }}
  </ul>
{% endcall %}
{%- endmacro %}


{% macro navDropdownItem(href, text) -%}
<li>
  {{ Link(href, text, extraClass="dropdown-item") }}
</li>
{%- endmacro %}

{% macro navDropdownDivider() -%}
<li><hr class="dropdown-divider"></li>
{%- endmacro %}
